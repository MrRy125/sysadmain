<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT412 Final Project Documentation - USTP</title>
    <style>
        :root {
            /* Professional Palette */
            --primary-color: #2c3e50; /* Dark Blue/Charcoal */
            --secondary-color: #34495e; /* Slightly Lighter Charcoal */
            --accent-color: #3498db; /* Bright Blue for emphasis */
            
            /* Code Styling */
            --code-bg: #2d2d2d; /* VS Code dark background */
            --code-text: #f8f8f2; /* Light text */
            --code-comment: #6a9955; /* Green for comments */
            --code-command: #569cd6; /* Blue for commands */
            --code-key: #f1c40f; /* Yellow for keystrokes */
            
            --border-color: #e0e0e0;
            --font-main: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            --font-code: 'Consolas', 'Monaco', 'Courier New', monospace;
        }

        body {
            font-family: var(--font-main);
            line-height: 1.6;
            color: #333;
            background-color: #f9f9f9;
            margin: 0;
            padding: 0;
        }

        /* Paper/Document Container */
        .document-container {
            max-width: 210mm; /* A4 width */
            margin: 40px auto;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.15); /* Stronger shadow */
            padding: 40px 60px;
            min-height: 297mm;
        }

        /* Header & Footer */
        header.doc-header {
            border-bottom: 3px solid var(--accent-color); /* Thicker accent line */
            padding-bottom: 15px;
            margin-bottom: 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left h1 {
            font-size: 1.1rem;
            margin: 0;
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .header-logo {
            font-size: 0.75rem;
            color: var(--secondary-color);
            padding: 5px 10px;
            border: 1px solid var(--secondary-color);
            border-radius: 4px;
        }

        .header-right {
            text-align: right;
            font-size: 0.9rem;
            color: #666;
        }

        /* Typography */
        h1, h2, h3, h4 {
            color: var(--primary-color);
        }

        h1.title-page-heading {
            font-size: 2.8rem; /* Larger title */
            text-align: center;
            margin-top: 120px;
            margin-bottom: 25px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        h2.section-title {
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            margin-top: 45px;
            font-size: 2.0rem;
            font-weight: 700;
        }

        h3 {
            font-size: 1.5rem;
            margin-top: 30px;
            color: var(--secondary-color);
            border-left: 5px solid var(--accent-color);
            padding-left: 10px;
        }
        
        h4 {
            font-size: 1.1rem;
            margin-top: 20px;
            color: #555;
            font-style: italic;
        }

        /* Title Page */
        .title-page {
            text-align: center;
            height: 90vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .logo-placeholder {
            width: 150px;
            height: 150px;
            background-color: var(--accent-color);
            margin: 0 auto 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            border-radius: 5px;
        }

        .project-details {
            margin-top: 70px;
            font-size: 1.1rem;
            line-height: 1.8;
        }

        .project-details p {
            margin: 5px 0;
        }
        
        .project-details strong {
            color: var(--primary-color);
        }

        /* Table of Contents */
        .toc {
            background-color: #f8f8f8;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 50px;
        }

        .toc h2 {
            margin-top: 0;
            text-align: center;
            border-bottom: none;
            color: var(--accent-color);
        }

        .toc ul {
            list-style-type: none;
            padding-left: 0;
        }

        .toc li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }
        
        .toc li::before {
            content: "‚Ä¢";
            color: var(--accent-color);
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
        }

        .toc a {
            text-decoration: none;
            color: var(--secondary-color);
            font-weight: 500;
        }

        .toc a:hover {
            color: var(--accent-color);
            text-decoration: underline;
        }

        /* Code Blocks (Prettier Formatting) */
        .code-block {
            background-color: var(--code-bg);
            border-left: 5px solid var(--accent-color);
            padding: 15px;
            font-family: var(--font-code);
            font-size: 0.95rem;
            color: var(--code-text);
            overflow-x: auto;
            margin: 20px 0;
            border-radius: 8px;
            white-space: pre-wrap; /* Allow wrapping */
        }
        
        /* Command Styling */
        .command {
            color: var(--code-command);
        }

        .command-comment {
            color: var(--code-comment);
            font-style: italic;
            display: block;
            margin-bottom: 5px;
        }
        
        .code-path {
            color: #d7ba7d; /* Yellow/Brown for paths */
        }
        
        .code-variable {
            color: #9cdcfe; /* Light Blue for variables/parameters */
        }
        
        .code-output {
            color: #ce9178; /* Orange for output/file content */
        }

        .keystroke {
            color: var(--code-key);
            font-weight: bold;
        }


        /* Screenshot Template */
        .screenshot-template {
            border: 3px dashed var(--accent-color);
            background-color: #f0f4f7;
            height: 280px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 25px 0;
            color: var(--primary-color);
            border-radius: 8px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
        }

        .screenshot-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .screenshot-caption {
            font-style: italic;
            font-size: 0.9rem;
            color: #555;
            text-align: center;
            margin-top: 15px;
            padding: 10px 20px;
            border-left: 3px solid var(--secondary-color);
            background-color: #fcfcfc;
            border-radius: 4px;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            border: 1px solid var(--border-color);
            padding: 15px;
            text-align: left;
        }

        th {
            background-color: var(--secondary-color);
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background-color: #f7f7f7;
        }
        
        ul, ol {
            padding-left: 30px;
        }
        
        li {
            margin-bottom: 8px;
        }

        /* Print Media Query */
        @media print {
            .document-container {
                box-shadow: none;
                margin: 0;
                width: 100%;
                max-width: none;
                padding: 40px 60px;
            }
            body {
                background-color: white;
            }
            .page-break {
                page-break-before: always;
            }
            header.doc-header {
                display: flex;
                position: fixed;
                top: 0;
                width: calc(100% - 120px);
                background: white;
                z-index: 1000;
            }
        }
    </style>
</head>
<body>

<div class="document-container">

    <!-- FRONT PAGE -->
    <div class="title-page">
        <div class="logo-placeholder">
            USTP
        </div>
        
        <h1 class="title-page-heading">System Administration and Maintenance<br>Final Project Documentation</h1>
        
        <div class="project-details">
            <p><strong>Subject Code:</strong> IT412</p>
            <p><strong>Course Title:</strong> System Administration and Maintenance</p>
            <p><strong>Project Title:</strong> Secure Linux File & User Management System</p>
            <br>
            <p><strong>Submitted To:</strong> [INSTRUCTOR NAME]</p>
            <br>
            <p><strong>Submitted By (Team Members):</strong></p>
            <p>[Student Name 1]</p>
            <p>[Student Name 2]</p>
            <br>
            <p><strong>Date of Submission:</strong> November 29, 2025</p>
        </div>
    </div>

    <div class="page-break"></div>

    <!-- TABLE OF CONTENTS -->
    <header class="doc-header">
        <div class="header-logo">USTP Tech Office Project</div>
        <div class="header-left">
            <h1>IT412 Final Project Documentation</h1>
        </div>
        <div class="header-right">
            Page 2
        </div>
    </header>

    <div class="toc">
        <h2>Table of Contents</h2>
        <ul>
            <li><a href="#intro">1.0 Project Description and Objectives</a></li>
            <li><a href="#reqs">2.0 System Requirements and Tools</a>
                <ul>
                    <li>2.1 Hardware/VM Specifications</li>
                    <li>2.2 Required Software Packages and Verification</li>
                </ul>
            </li>
            <li><a href="#setup">3.0 System Set Up and Configuration</a>
                <ul>
                    <li>3.1 OS Installation Verification</li>
                    <li>3.2 User and Group Management</li>
                </ul>
            </li>
            <li><a href="#perms">4.0 File System and Permissions (Lesson 5)</a>
                <ul>
                    <li>4.1 Directory Structure Creation</li>
                    <li>4.2 Applying Ownership and Permissions</li>
                    <li>4.3 Access Verification (Proof of Isolation)</li>
                </ul>
            </li>
            <li><a href="#security">5.0 Security Implementation</a>
                <ul>
                    <li>5.1.1 Password Expiration Policies (`chage`)</li>
                    <li>5.1.2 Password Complexity Policies (`pwquality`)</li>
                    <li>5.2 Firewall and SSH Hardening (UFW)</li>
                </ul>
            </li>
            <li><a href="#maint">6.0 Automation and Maintenance (Lesson 4)</a>
                <ul>
                    <li>6.1 Automated Backup Script Creation (Redirection)</li>
                    <li>6.2 Making Script Executable and Verification</li>
                    <li>6.3 Cron Scheduling and Verification</li>
                    <li>6.4 System Monitoring and Process Inspection (`top`, `ps`)</li>
                </ul>
            </li>
            <li><a href="#trouble">7.0 Testing, Troubleshooting, and Issues Encountered</a></li>
            <li><a href="#summary">8.0 Summary and Recommendations</a></li>
        </ul>
    </div>

    <!-- 1.0 PROJECT DESCRIPTION -->
    <section id="intro">
        <h2 class="section-title">1.0 Project Description and Objectives</h2>
        <p>This final project, based on the IT412 curriculum and guidelines, documents the configuration of a secure Linux-based multi-user system for the USTP Tech Office. The system uses Ubuntu Server to host and manage data for three departments: Administration, Faculty, and Students. The primary requirement is to enforce stringent IT policies, including data isolation, access control, and system automation.</p>
        
        <p><strong>Core Project Objectives:</strong></p>
        <ol>
            <li>Configure a robust Linux Virtual Machine enforcing all organizational security and usage policies.</li>
            <li>Implement hierarchical user and group management for all departments.</li>
            <li>Secure the file system using strict ownership (<span class="code-command">chown</span>) and permission rules (<span class="code-command">chmod</span> - Lesson 5).</li>
            <li>Automate essential maintenance tasks, notably system backup and process monitoring (Lesson 4).</li>
            <li>Provide comprehensive documentation with step-by-step procedures and verification screenshots.</li>
        </ol>
    </section>

    <!-- 2.0 REQUIREMENTS -->
    <section id="reqs">
        <h2 class="section-title">2.0 System Requirements and Tools</h2>
        
        <h3>2.1 Hardware/VM Specifications</h3>
        <p>The virtual machine was provisioned with the following resources to ensure optimal performance for a server environment.</p>
        <table>
            <tr>
                <th>Component</th>
                <th>Requirement</th>
            </tr>
            <tr>
                <td>Operating System</td>
                <td>Ubuntu Server 22.04 LTS (Minimal Installation)</td>
            </tr>
            <tr>
                <td>RAM</td>
                <td>4GB</td>
            </tr>
            <tr>
                <td>Storage</td>
                <td>30GB Dynamically Allocated Disk Space</td>
            </tr>
        </table>

        <h3>2.2 Required Software Packages and Verification</h3>
        <p>These essential packages enable ACLs, password complexity checking, firewall, and remote access. We verify the installation immediately after execution.</p>
        <div class="code-block">
            <span class="code-comment"># STEP 1: Update package list and install all required packages:</span>
            <span class="command">sudo apt update</span> && <span class="command">sudo apt upgrade -y</span>
            <span class="command">sudo apt install</span> <span class="code-variable">acl</span> <span class="code-variable">libpam-pwquality</span> <span class="code-variable">ufw</span> <span class="code-variable">openssh-server</span> <span class="code-variable">-y</span>
            
            <span class="code-comment"># STEP 2: Verification of package installation (e.g., check for ufw)</span>
            <span class="command">dpkg -l ufw</span>
            <span class="code-output">ii ufw 0.36.1-4ubuntu1 ... Uncomplicated Firewall</span>
        </div>
        <p class="screenshot-caption">Figure 2.2: The installation of key packages like <span class="code-variable">ufw</span> and <span class="code-variable">libpam-pwquality</span> is confirmed using the <span class="code-command">dpkg -l</span> command.</p>
    </section>

    <div class="page-break"></div>

    <!-- 3.0 SETUP -->
    <header class="doc-header">
        <div class="header-logo">USTP Tech Office Project</div>
        <div class="header-left">
            <h1>IT412 Final Project Documentation</h1>
        </div>
        <div class="header-right">
            Page 3
        </div>
    </header>

    <section id="setup">
        <h2 class="section-title">3.0 System Set Up and Configuration</h2>

        <h3 id="install">3.1 OS Installation Verification</h3>
        <p>The hostname was set to clearly identify the machine as part of the USTP Tech Office infrastructure.</p>
        
        <div class="code-block">
            <span class="code-comment"># COMMAND: Verification of the installed Linux kernel and hostname</span>
            <span class="command">hostnamectl</span>
            <span class="code-output">... Static hostname: ustp-tech-server ...</span>
        </div>
        
        <div class="screenshot-template">
            <div class="screenshot-icon">üì∑</div>
            <div>[Screenshot: Terminal displaying <span class="code-command">hostnamectl</span> output with the assigned hostname <span class="code-output">ustp-tech-server</span>]</div>
        </div>
        <p class="screenshot-caption">Figure 3.1: Post-installation verification confirming the Linux distribution and the project's assigned hostname.</p>

        <h3 id="users">3.2 User and Group Management</h3>
        <p>Specific groups and users were created for the three departments, assigning the least privilege necessary. **We will now set up the users and their initial passwords.**</p>

        <h4>3.2.1 Creating Department Groups and Users</h4>
        <div class="code-block">
            <span class="code-comment"># STEP 1: Create the three department groups for access control</span>
            <span class="command">sudo groupadd</span> <span class="code-variable">admin_dept</span>
            <span class="command">sudo groupadd</span> <span class="code-variable">faculty_dept</span>
            <span class="command">sudo groupadd</span> <span class="code-variable">student_dept</span>
            
            <span class="code-comment"># STEP 2: Create users and set their primary group (-g) and home directory (-m)</span>
            <span class="command">sudo useradd -m -s /bin/bash -g</span> <span class="code-variable">admin_dept</span> <span class="code-variable">admin_user</span>
            <span class="command">sudo useradd -m -s /bin/bash -g</span> <span class="code-variable">faculty_dept</span> <span class="code-variable">faculty_user</span>
            <span class="command">sudo useradd -m -s /bin/bash -g</span> <span class="code-variable">student_dept</span> <span class="code-variable">student_user</span>
        </div>
        
        <h4>3.2.2 Setting Initial Passwords (`passwd`)</h4>
        <p>The <span class="code-command">passwd</span> command is used by the system administrator (via <span class="code-command">sudo</span>) to set initial passwords for new accounts. The system will prompt you to enter the new password twice.</p>
        <div class="code-block">
            <span class="code-comment"># STEP 1: Set initial password for admin_user. You will be prompted to type and confirm.</span>
            <span class="command">sudo passwd</span> <span class="code-variable">admin_user</span>
            <span class="code-output">New password: ********</span>
            <span class="code-output">Retype new password: ********</span>
            <span class="code-output">passwd: password updated successfully</span>
            
            <span class="code-comment"># STEP 2: Repeat for the other users</span>
            <span class="command">sudo passwd</span> <span class="code-variable">faculty_user</span>
            <span class="command">sudo passwd</span> <span class="code-variable">student_user</span>
        </div>

        <h4>3.2.3 Bulk Verification of Group Membership (The `getent` Command)</h4>
        <p>To verify which users belong to a specific group, the **getent** command is the most efficient and robust method as it checks the system's Name Service Switch configuration, including local files and directories.</p>
        <div class="code-block">
            <span class="code-comment"># COMMAND: Verify all users assigned to the admin_dept group</span>
            <span class="command">getent group admin_dept</span>
            <span class="code-output">admin_dept:x:1001:admin_user</span>
            
            <span class="code-comment"># COMMAND: Verify all users assigned to the faculty_dept group</span>
            <span class="command">getent group faculty_dept</span>
            <span class="code-output">faculty_dept:x:1002:faculty_user</span>
        </div>

        <div class="screenshot-template">
            <div class="screenshot-icon">üÜî</div>
            <div>[Screenshot: Output of <span class="code-command">getent group admin_dept</span> confirming the user <span class="code-variable">admin_user</span> is the primary member.]</div>
        </div>
        <p class="screenshot-caption">Figure 3.2.3: Group Membership Verification. <span class="code-command">getent</span> command provides a clean list of users belonging to the specified group.</p>
        
        <h4>3.2.4 Switching User Sessions for Login Testing (`su -`)</h4>
        <p>To test configurations (like folder permissions or password policies) from the user's perspective, we must switch to that user's session using <span class="code-command">su -</span> (switch user, with the hyphen to ensure a full login environment).</p>
        <div class="code-block">
            <span class="code-comment"># STEP 1: Switch to the admin_user account (you will be prompted for their password)</span>
            <span class="command">su - admin_user</span>
            <span class="code-output">Password: ********</span>
            <span class="code-output">admin_user@ustp-tech-server:~$</span> <span class="code-comment"># Prompt changes, confirming successful login</span>
            
            <span class="code-comment"># STEP 2: Check current identity using the 'id' command (proof of login)</span>
            <span class="command">id</span>
            
            <span class="code-comment"># STEP 3: Exit the user session to return to the root/admin account</span>
            <span class="command">exit</span>
            <span class="code-output">logout</span>
        </div>

        <div class="screenshot-template">
            <div class="screenshot-icon">üö™</div>
            <div>[Screenshot: Terminal showing the process of switching user with <span class="code-command">su - admin_user</span>, entering the password, and the shell prompt changing to <span class="code-output">admin_user@ustp-tech-server:~$</span>]</div>
        </div>
        <p class="screenshot-caption">Figure 3.2.4: User Session Switching. This process is essential for verifying access controls from the end-user's point of view.</p>
        
    </section>

    <div class="page-break"></div>

    <!-- 4.0 PERMISSIONS -->
    <header class="doc-header">
        <div class="header-logo">USTP Tech Office Project</div>
        <div class="header-left">
            <h1>IT412 Final Project Documentation</h1>
        </div>
        <div class="header-right">
            Page 4
        </div>
    </header>

    <section id="perms">
        <h2 class="section-title">4.0 File System and Permissions (Lesson 5)</h2>
        <p>This section enforces data isolation using the 770 policy (rwxrwx---), ensuring only group members can access their department's data.</p>

        <h3 id="folders">4.1 Directory Structure Creation</h3>
        <p>The central data structure is created under <span class="code-path">/srv/ustp_data</span>.</p>
        <div class="code-block">
            <span class="code-comment"># STEP 1: Create base directory and subdirectories using -p</span>
            <span class="command">sudo mkdir -p /srv/ustp_data/admin_docs</span>
            <span class="command">sudo mkdir -p /srv/ustp_data/faculty_docs</span>
            <span class="command">sudo mkdir -p /srv/ustp_data/student_docs</span>
            
            <span class="code-comment"># STEP 2: Verification of directory existence</span>
            <span class="command">ls -ld /srv/ustp_data/*</span>
        </div>

        <h3 id="access">4.2 Applying Ownership and Permissions</h3>
        <p>Owner is set to <span class="code-variable">root</span>, and Group is set to the respective department.</p>

        <div class="code-block">
            <span class="code-comment"># STEP 1: Set group ownership (`chown`) for each directory to its department group</span>
            <span class="command">sudo chown root:admin_dept</span> <span class="code-path">/srv/ustp_data/admin_docs</span>
            <span class="command">sudo chown root:faculty_dept</span> <span class="code-path">/srv/ustp_data/faculty_docs</span>
            <span class="command">sudo chown root:student_dept</span> <span class="code-path">/srv/ustp_data/student_docs</span>
            
            <span class="code-comment"># STEP 2: Apply 770 permissions (`chmod`): Owner=rwx, Group=rwx, Others=---</span>
            <span class="command">sudo chmod 770 /srv/ustp_data/admin_docs</span>
            <span class="command">sudo chmod 770 /srv/ustp_data/faculty_docs</span>
            <span class="command">sudo chmod 770 /srv/ustp_data/student_docs</span>
            
            <span class="code-comment"># STEP 3: Verification of Permissions and Ownership (`ls -l`)</span>
            <span class="command">ls -ld /srv/ustp_data/*</span>
            <span class="code-output">drwxrwx--- 2 root admin_dept 4096 Nov 29 10:00 /srv/ustp_data/admin_docs</span>
        </div>

        <div class="screenshot-template">
            <div class="screenshot-icon">üì∑</div>
            <div>[Screenshot: Output of <span class="code-command">ls -ld /srv/ustp_data/*</span> showing the <strong>drwxrwx---</strong> string and correct group ownership]</div>
        </div>
        <p class="screenshot-caption">Figure 4.1: The <span class="code-command">ls -ld</span> output confirms the successful application of 770 permissions and correct group ownership, validating the data isolation policy.</p>

        <h3 id="access-verify">4.3 Access Verification (Proof of Isolation)</h3>
        <p>A crucial step is to log in as a non-member and attempt access, which should result in a "Permission denied" error. We use the **su -** command as verified in Section 3.2.4.</p>
        <div class="code-block">
            <span class="code-comment"># STEP 1: Switch to a non-authorized user (e.g., faculty_user)</span>
            <span class="command">su - faculty_user</span>
            
            <span class="code-comment"># STEP 2: Attempt to access a directory owned by a different group (admin_dept)</span>
            <span class="command">ls /srv/ustp_data/admin_docs</span>
            <span class="code-output">ls: cannot open directory '/srv/ustp_data/admin_docs': Permission denied</span>
            
            <span class="code-comment"># STEP 3: Exit the user session</span>
            <span class="command">exit</span>
        </div>
        <div class="screenshot-template">
            <div class="screenshot-icon">üîí</div>
            <div>[Screenshot: Terminal showing a user (<span class="code-variable">faculty_user</span>) attempting to <span class="code-command">ls</span> a restricted folder, resulting in the "Permission denied" error.]</div>
        </div>
        <p class="screenshot-caption">Figure 4.2: Access Control Verification. A non-authorized user's failed attempt proves the effectiveness of the 770 permission policy.</p>
    </section>

    <div class="page-break"></div>

    <!-- 5.0 SECURITY -->
    <header class="doc-header">
        <div class="header-logo">USTP Tech Office Project</div>
        <div class="header-left">
            <h1>IT412 Final Project Documentation</h1>
        </div>
        <div class="header-right">
            Page 5
        </div>
    </header>

    <section id="security">
        <h2 class="section-title">5.0 Security Implementation</h2>

        <h3 id="pass">5.1 User Password Policies</h3>
        
        <h4>5.1.1 Password Expiration Policies (`chage` command)</h4>
        <p>All users must change their password every 90 days. This policy is implemented using the <span class="code-command">chage</span> command.</p>
        <div class="code-block">
            <span class="code-comment"># STEP 1: Set maximum password age to 90 days for all department users (-M 90)</span>
            <span class="command">sudo chage -M 90</span> <span class="code-variable">admin_user</span>
            <span class="command">sudo chage -M 90</span> <span class="code-variable">faculty_user</span>
            <span class="command">sudo chage -M 90</span> <span class="code-variable">student_user</span>

            <span class="code-comment"># STEP 2: Verification (Display the applied policy for a user)</span>
            <span class="command">sudo chage -l admin_user</span>
            <span class="code-output">... Maximum number of days between password change : 90</span>
        </div>

        <div class="screenshot-template">
            <div class="screenshot-icon">üîë</div>
            <div>[Screenshot: Output of <span class="code-command">chage -l admin_user</span> showing "Maximum number of days between password change: 90"]</div>
        </div>
        <p class="screenshot-caption">Figure 5.1.1: Password Expiration Policy. The output confirms the system enforces a 90-day password expiration limit.</p>

        <h4>5.1.2 Password Complexity Policies (`pwquality`)</h4>
        <p>The <span class="code-variable">libpam-pwquality</span> module enforces minimum length (8), uppercase, numerical, and special character requirements.</p>
        <div class="code-block">
            <span class="code-comment"># STEP 1: Open the configuration file using nano</span>
            <span class="command">sudo nano /etc/security/pwquality.conf</span>

            <span class="code-comment"># STEP 2: Find and modify the following lines to enforce complexity:</span>
            <span class="code-output">minlen = 8</span>
            <span class="code-output">dcredit = -1</span> <span class="code-comment"># Requires at least one digit (numerical)</span>
            <span class="code-output">ucredit = -1</span> <span class="code-comment"># Requires at least one uppercase letter (A-Z)</span>
            <span class="code-output">ocredit = -1</span> <span class="code-comment"># Requires at least one other/special character (!, @, #, etc.)</span>
            
            <span class="code-comment"># STEP 3: Save and Exit: Press <span class="keystroke">CTRL+O</span>, then <span class="keystroke">ENTER</span>, then <span class="keystroke">CTRL+X</span></span>
            
            <span class="code-comment"># STEP 4: Verification (Use grep to confirm the changes are saved in the file)</span>
            <span class="command">grep 'credit = -1' /etc/security/pwquality.conf</span>
            <span class="code-output">ucredit = -1</span>
            <span class="code-output">dcredit = -1</span>
            <span class="code-output">ocredit = -1</span>
        </div>
        <p class="screenshot-caption">Figure 5.1.2: The complexity requirements are confirmed by using <span class="code-command">grep</span> on the configuration file.</p>
        
        <div class="page-break"></div>
        
        <header class="doc-header">
            <div class="header-logo">USTP Tech Office Project</div>
            <div class="header-left">
                <h1>IT412 Final Project Documentation</h1>
            </div>
            <div class="header-right">
                Page 6
            </div>
        </header>

        <h3 id="net">5.2 Firewall and SSH Hardening</h3>
        <p>UFW is configured for "deny by default, allow SSH access."</p>

        <h4>5.2.1 Firewall Configuration (`ufw`)</h4>
        <div class="code-block">
            <span class="code-comment"># STEP 1: Enable logging (optional but useful for security review)</span>
            <span class="command">sudo ufw logging on</span>
            
            <span class="code-comment"># STEP 2: Allow incoming connections on the standard SSH port (22)</span>
            <span class="command">sudo ufw allow ssh</span>
            
            <span class="code-comment"># STEP 3: Enable the firewall (this activates the deny by default policy)</span>
            <span class="command">sudo ufw enable</span>

            <span class="code-comment"># STEP 4: Verification (Check the current status and rules)</span>
            <span class="command">sudo ufw status verbose</span>
            <span class="code-output">Status: active</span>
            <span class="code-output">To                         Action      From</span>
            <span class="code-output">--                         ------      ----</span>
            <span class="code-output">22/tcp                     ALLOW IN    Anywhere</span>
        </div>

        <div class="screenshot-template">
            <div class="screenshot-icon">üõ°Ô∏è</div>
            <div>[Screenshot: Output of <span class="code-command">ufw status verbose</span> showing Status: active and Rule: 22/tcp ALLOW Anywhere]</div>
        </div>
        <p class="screenshot-caption">Figure 5.2.1: UFW Status. The command confirms the firewall is active and only SSH traffic (port 22) is permitted.</p>

        <h4>5.2.2 SSH Hardening (Disabling Root Login)</h4>
        <p>Direct root login via SSH is disabled for security.</p>
        <div class="code-block">
            <span class="code-comment"># STEP 1: Edit the SSH daemon configuration file</span>
            <span class="command">sudo nano /etc/ssh/sshd_config</span>
            
            <span class="code-comment"># STEP 2: Find the line 'PermitRootLogin' and ensure it is set to:</span>
            <span class="code-output">PermitRootLogin no</span>

            <span class="code-comment"># STEP 3: Save and Exit: Press <span class="keystroke">CTRL+O</span>, then <span class="keystroke">ENTER</span>, then <span class="keystroke">CTRL+X</span></span>
            
            <span class="code-comment"># STEP 4: Apply changes by restarting the SSH service</span>
            <span class="command">sudo systemctl restart ssh</span>
            
            <span class="code-comment"># STEP 5: Verification (Check if the change is active)</span>
            <span class="command">grep 'PermitRootLogin' /etc/ssh/sshd_config</span>
            <span class="code-output">PermitRootLogin no</span>
        </div>
    </section>

    <div class="page-break"></div>

    <!-- 6.0 AUTOMATION -->
    <header class="doc-header">
        <div class="header-logo">USTP Tech Office Project</div>
        <div class="header-left">
            <h1>IT412 Final Project Documentation</h1>
        </div>
        <div class="header-right">
            Page 7
        </div>
    </header>

    <section id="maint">
        <h2 class="section-title">6.0 Automation and Maintenance (Lesson 4)</h2>
        <p>Proactive system maintenance and monitoring are automated using Bash scripting and the Cron scheduling utility.</p>

        <h3 id="backup">6.1 Automated Backup Script Creation (Redirection)</h3>
        <p>We use the **cat command with EOF redirection** to create the <span class="code-path">backup.sh</span> script without opening the nano editor, which is generally faster and less error-prone. This command allows us to type the script content directly, which is then redirected into the file.</p>

        <h4>6.1.1 Creating the Script via Redirection</h4>
        <p>The script archives the <span class="code-path">/srv/ustp_data</span> directory nightly and logs the outcome.</p>
        <div class="code-block">
            <span class="code-comment"># Command uses 'cat' to redirect the block of text below into the file.</span>
            <span class="command">cat &lt;&lt;EOF | sudo tee /usr/local/bin/backup.sh</span>
            <span class="code-output">#!/bin/bash</span>
            
            <span class="code-output">BACKUP_SRC="/srv/ustp_data"</span>
            <span class="code-output">BACKUP_DEST="/var/backups/ustp_archives"</span>
            <span class="code-output">TIMESTAMP=$(date +"%Y%m%d_%H%M%S")</span>
            <span class="code-output">FILENAME="ustp_data_backup_$TIMESTAMP.tar.gz"</span>
            <span class="code-output">LOG_FILE="/var/log/ustp_backup.log"</span>
            
            <span class="code-output">mkdir -p "$BACKUP_DEST"</span>
            
            <span class="code-output">echo "$(date): Starting backup..." >> "$LOG_FILE"</span>
            <span class="code-output">tar -czf "$BACKUP_DEST/$FILENAME" "$BACKUP_SRC" 2>> "$LOG_FILE"</span>
            
            <span class="code-output">if [ $? -eq 0 ]; then</span>
            <span class="code-output">    echo "$(date): Backup Success: $FILENAME" >> "$LOG_FILE"</span>
            <span class="code-output">else</span>
            <span class="code-output">    echo "$(date): Backup FAILED! Check error log." >> "$LOG_FILE"</span>
            <span class="code-output">fi</span>
            <span class="code-output">EOF</span>
        </div>
        
        <h3 id="exec">6.2 Making Script Executable and Verification</h3>
        <p>A script must have the executable permission set before Cron can run it.</p>
        <div class="code-block">
            <span class="code-comment"># STEP 1: Make the script executable (`chmod +x`)</span>
            <span class="command">sudo chmod +x /usr/local/bin/backup.sh</span>

            <span class="code-comment"># STEP 2: Verification (Check file permissions, 'x' should be present)</span>
            <span class="command">ls -l /usr/local/bin/backup.sh</span>
            <span class="code-output">-rwxr-xr-x 1 root root 450 Nov 29 12:00 /usr/local/bin/backup.sh</span>
        </div>

        <h3 id="schedule">6.3 Cron Scheduling and Verification</h3>
        <p>The script is scheduled to run every day at 02:00 AM using the root user's crontab for full system access.</p>
        <div class="code-block">
            <span class="code-comment"># STEP 1: Open crontab editor for the root user</span>
            <span class="command">sudo crontab -e</span>

            <span class="code-comment"># STEP 2: Add the following line at the end of the file:</span>
            <span class="code-output">0 2 * * * /bin/bash /usr/local/bin/backup.sh</span>
            
            <span class="code-comment"># STEP 3: Save and Exit: Press <span class="keystroke">CTRL+O</span>, then <span class="keystroke">ENTER</span>, then <span class="keystroke">CTRL+X</span></span>

            <span class="code-comment"># STEP 4: Verification (List the root user's crontab entries)</span>
            <span class="command">sudo crontab -l</span>
            <span class="code-output">0 2 * * * /bin/bash /usr/local/bin/backup.sh</span>
        </div>

        <div class="screenshot-template">
            <div class="screenshot-icon">‚è∞</div>
            <div>[Screenshot: Output of <span class="code-command">sudo crontab -l</span> confirming the automated backup job is scheduled for 2 AM]</div>
        </div>
        <p class="screenshot-caption">Figure 6.3: Cron Job Verification. The command verifies the script is correctly scheduled for daily execution.</p>

        <h3 id="monitor">6.4 System Monitoring and Process Inspection (Lesson 4)</h3>
        <p>System health is monitored by inspecting active processes and resource utilization.</p>

        <div class="code-block">
            <span class="code-comment"># COMMAND 1: View dynamic resource usage (CPU, Memory, Swaps)</span>
            <span class="command">top</span>
            
            <span class="code-comment"># COMMAND 2: List all running processes with user/CPU/Memory details</span>
            <span class="command">ps aux</span>
        </div>

        <div class="screenshot-template">
            <div class="screenshot-icon">üìä</div>
            <div>[Screenshot: Output of <span class="code-command">top</span> command showing resource utilization metrics and process details (PID, USER, %CPU, %MEM)]</div>
        </div>
        <p class="screenshot-caption">Figure 6.4: System Process Inspection. The <span class="code-command">top</span> command provides crucial data on system load and active processes.</p>
    </section>

    <div class="page-break"></div>

    <!-- 7.0 TESTING -->
    <header class="doc-header">
        <div class="header-logo">USTP Tech Office Project</div>
        <div class="header-left">
            <h1>IT412 Final Project Documentation</h1>
        </div>
        <div class="header-right">
            Page 8
        </div>
    </header>

    <section id="trouble">
        <h2 class="section-title">7.0 Testing, Troubleshooting, and Issues Encountered</h2>
        <p>Thorough testing was performed to ensure all security and automation policies are correctly applied.</p>

        <h3>7.1 Verification Summary</h3>
        <table>
            <tr>
                <th>Component</th>
                <th>Test Procedure</th>
                <th>Verification Command</th>
                <th>Result</th>
            </tr>
            <tr>
                <td>Group Access</td>
                <td>Log in as <span class="code-variable">student_user</span> and attempt <span class="code-command">ls</span> on <span class="code-path">/srv/ustp_data/admin_docs</span>.</td>
                <td><span class="code-command">ls /srv/ustp_data/admin_docs</span> (as student_user)</td>
                <td>**Passed.** Returns "Permission denied."</td>
            </tr>
            <tr>
                <td>User Membership</td>
                <td>Check all users in the <span class="code-variable">admin_dept</span> group.</td>
                <td><span class="code-command">getent group admin_dept</span></td>
                <td>**Passed.** Shows <span class="code-variable">admin_user</span> only.</td>
            </tr>
            <tr>
                <td>Password Expiration</td>
                <td>Confirm Max Age is set to 90 days.</td>
                <td><span class="code-command">sudo chage -l faculty_user</span></td>
                <td>**Passed.** Max Age: 90 days.</td>
            </tr>
            <tr>
                <td>Password Complexity</td>
                <td>Attempt to set a password like "password" using <span class="code-command">passwd</span>.</td>
                <td><span class="code-command">sudo passwd admin_user</span> (with weak password)</td>
                <td>**Passed.** System rejects weak password, citing missing complexity requirements.</td>
            </tr>
            <tr>
                <td>Firewall</td>
                <td>Check active status and allowed ports.</td>
                <td><span class="code-command">sudo ufw status verbose</span></td>
                <td>**Passed.** Status active; Only port 22 (SSH) ALLOWED.</td>
            </tr>
            <tr>
                <td>Backup Automation</td>
                <td>Manually execute the script, then check log file and archive creation.</td>
                <td><span class="code-command">sudo /usr/local/bin/backup.sh</span> <br> <span class="code-command">tail /var/log/ustp_backup.log</span> <br> <span class="code-command">ls -l /var/backups/ustp_archives/</span></td>
                <td>**Passed.** Log shows "Backup Success"; compressed file is present.</td>
            </tr>
        </table>

        <h3>7.2 Documented Issues and Resolutions</h3>
        <p><strong>Issue: Cron Script Execution Failure</strong></p>
        <p>The script was not executing because it lacked the necessary executable bit.</p>
        <div class="code-block">
            <span class="code-comment"># Resolution: Add execute permission for the owner.</span>
            <span class="command">chmod +x /usr/local/bin/backup.sh</span>
        </div>

        <p><strong>Issue: Password Complexity Not Active</strong></p>
        <p>The password complexity rules were defined in <span class="code-path">pwquality.conf</span> but not being enforced by the system.</p>
        <p><strong>Resolution:</strong> On some Ubuntu installations, the `pam_pwquality.so` module must be explicitly referenced in the <span class="code-path">/etc/pam.d/common-password</span> file. Verification showed that this module was correctly integrated, but a minor modification of removing `obscure` from the parameters sometimes forces immediate enforcement.</p>
        <div class="code-block">
            <span class="code-comment"># Check /etc/pam.d/common-password to ensure the module is included:</span>
            <span class="command">cat /etc/pam.d/common-password | grep pam_pwquality</span>
            <span class="code-output">password        requisite       pam_pwquality.so ...</span>
        </div>
    </section>

    <div class="page-break"></div>

    <!-- 8.0 SUMMARY -->
    <header class="doc-header">
        <div class="header-logo">USTP Tech Office Project</div>
        <div class="header-left">
            <h1>IT412 Final Project Documentation</h1>
        </div>
        <div class="header-right">
            Page 9
        </div>
    </header>

    <section id="summary">
        <h2 class="section-title">8.0 Summary and Recommendations</h2>
        <p>The USTP Tech Office System Administration project successfully meets all guidelines outlined in the criteria. A secure, functional, and automated Linux environment was provisioned, demonstrating proficiency in user/group management, file system security (Lesson 5), process monitoring (Lesson 4), and system automation.</p>
        
        <h4>Recommendations for System Improvement and Sustainment</h4>
        <ol>
            <li><strong>Remote Backup Implementation:</strong> Configure an automated <span class="code-command">rsync</span> job to transfer daily backups to a secure, off-site storage location, ensuring business continuity in case of VM failure.</li>
            <li><strong>SELinux/AppArmor Integration:</strong> For enhanced mandatory access control (MAC), implement and configure AppArmor profiles to restrict what system resources individual applications (like the web server, if added) can access.</li>
            <li><strong>Resource Quota Implementation:</strong> Use the <span class="code-command">quota</span> utility to limit the disk space allocated to the <span class="code-variable">student_dept</span> to prevent accidental system storage exhaustion.</li>
            <li><strong>Log Rotation Policy:</strong> Verify and fine-tune the <span class="code-command">logrotate</span> configuration to efficiently manage the size of system log files, including the new <span class="code-path">ustp_backup.log</span>.</li>
        </ol>
    </section>
    
    <div class="page-break"></div>

    <!-- APPENDICES -->
    <header class="doc-header">
        <div class="header-logo">USTP Tech Office Project</div>
        <div class="header-left">
            <h1>IT412 Final Project Documentation</h1>
        </div>
        <div class="header-right">
            Page 10
        </div>
    </header>
    
    <section>
        <h2 class="section-title">Appendix A: Full Automated Maintenance Script</h2>
        <p>The complete script used for automated daily data archiving, located at <span class="code-path">/usr/local/bin/backup.sh</span>.</p>
        <div class="code-block">
            <span class="code-comment">#!/bin/bash</span>
            <span class="code-comment"># Script Name: backup.sh</span>
            <span class="code-comment"># Function: Archives critical department data and logs the operation.</span>
            
            <span class="code-comment"># --- Configuration Variables ---</span>
            <span class="code-variable">SOURCE_DIRS</span>=<span class="code-output">"/srv/ustp_data"</span>
            <span class="code-variable">BACKUP_ROOT</span>=<span class="code-output">"/var/backups/ustp_archives"</span>
            <span class="code-variable">LOG_FILE</span>=<span class="code-output">"/var/log/ustp_backup.log"</span>
            <span class="code-variable">TIMESTAMP</span>=$(<span class="command">date +"%Y%m%d_%H%M%S"</span>)
            <span class="code-variable">BACKUP_NAME</span>=<span class="code-output">"ustp_data_backup_</span><span class="code-variable">$TIMESTAMP</span><span class="code-output">.tar.gz"</span>
            
            <span class="code-comment"># --- Execution ---</span>
            
            <span class="code-comment"># 1. Ensure backup directory exists and has restricted permissions (700)</span>
            if [ ! -d "<span class="code-variable">$BACKUP_ROOT</span>" ]; then
                <span class="command">mkdir -p</span> "<span class="code-variable">$BACKUP_ROOT</span>"
                <span class="command">chmod 700</span> "<span class="code-variable">$BACKUP_ROOT</span>"
            fi
            
            <span class="code-comment"># 2. Perform Backup using tar</span>
            <span class="command">echo</span> <span class="code-output">"$(date): Starting backup..."</span> <span class="command">>></span> "<span class="code-variable">$LOG_FILE</span>"
            <span class="command">tar -czf</span> "<span class="code-variable">$BACKUP_ROOT/$BACKUP_NAME</span>" "<span class="code-variable">$SOURCE_DIRS</span>" <span class="command">2>></span> "<span class="code-variable">$LOG_FILE</span>"
            
            <span class="code-comment"># 3. Validation and Logging</span>
            if [ <span class="command">$?</span> -eq 0 ]; then
                <span class="command">echo</span> <span class="code-output">"$(date): Backup Success: </span><span class="code-variable">$BACKUP_NAME</span><span class="code-output">"</span> <span class="command">>></span> "<span class="code-variable">$LOG_FILE</span>"
            else
                <span class="command">echo</span> <span class="code-output">"$(date): Backup FAILED! Check error log."</span> <span class="command">>></span> "<span class="code-variable">$LOG_FILE</span>"
            fi
        </div>
    </section>
</div>

</body>
</html>